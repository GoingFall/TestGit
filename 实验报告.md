# 实验五：配置管理实验报告

## 一、实验目的与背景

在现代软件开发过程中，配置管理是软件工程的重要组成部分。随着项目规模的不断扩大和开发团队的协作需求，如何有效地管理代码版本、追踪变更历史、协调多人开发成为了软件开发中必须解决的问题。

配置管理（Configuration Management）是指对软件系统及其组件的版本进行标识、控制和追踪的过程。它能够帮助开发团队维护软件的一致性，追踪变更历史，并在需要时恢复到之前的版本。主流的配置管理工具包括集中式版本控制系统（如SVN）和分布式版本控制系统（如Git）。

Git作为一个开源的分布式版本控制系统，由Linus Torvalds开发，旨在有效、高速地处理从很小到非常大的项目版本管理。与传统的集中式版本控制系统不同，Git的分布式特性使得每个开发者都拥有完整的项目历史副本，这不仅提高了工作效率，还增强了系统的可靠性和灵活性。Git已经成为当今软件开发领域最广泛使用的版本控制工具，掌握Git的使用方法对于软件工程专业的学生来说至关重要。

本次实验旨在通过实践操作，深入理解配置管理的基本原理，掌握Git版本管理工具的安装、配置和使用方法，熟悉本地仓库的创建、文件管理、版本控制、分支操作、远程协作以及标签管理等核心功能。

## 二、Git安装与配置

### 2.1 Git的下载与安装

Git的安装过程相对简单。首先需要访问Git官方网站（https://git-scm.com/）下载适合Windows系统的安装程序。下载完成后，运行安装程序，按照向导提示完成安装。在安装过程中，可以选择默认的编辑器、路径环境变量设置、行尾转换方式等配置选项。对于初学者，建议使用默认配置即可。

安装完成后，需要验证Git是否成功安装。打开命令行工具（如PowerShell或CMD），输入`git --version`命令，如果显示Git的版本信息，则说明安装成功。【此处插入Git版本验证截图】

### 2.2 Git的初始配置

Git安装完成后，在使用之前需要进行基本的用户信息配置。这些配置信息将用于标识每次提交的作者身份。通过`git config --global user.name "Your Name"`命令设置用户名，通过`git config --global user.email "your.email@example.com"`命令设置邮箱地址。这些配置信息会被保存在全局配置文件中，之后的所有Git仓库都会使用这些信息。

除了用户信息外，还可以配置其他选项，如默认编辑器、颜色显示等。通过`git config --list`命令可以查看所有当前的配置信息。【此处插入Git配置信息截图】完成这些基本配置后，Git环境就准备就绪，可以开始进行版本控制操作了。

## 三、本地仓库创建与文件管理

### 3.1 创建本地Git仓库

创建本地Git仓库是进行版本控制的第一步。有两种方式可以创建Git仓库：一种是在现有项目目录中初始化仓库，另一种是克隆已有的远程仓库。对于本次实验，我们采用第一种方式，在本地创建一个新的项目目录。

首先，创建一个用于存放项目的文件夹，例如创建一个C语言或C++项目。进入该目录后，使用`git init`命令初始化Git仓库。这个命令会在当前目录下创建一个隐藏的`.git`文件夹，该文件夹包含了Git仓库的所有元数据和版本历史信息。【此处插入git init命令执行截图】

初始化完成后，Git仓库就已经创建成功了。此时可以使用`git status`命令查看仓库的当前状态。在还没有任何文件被添加到仓库时，Git会提示当前目录是一个空的Git仓库。

### 3.2 创建项目文件并提交到本地库

接下来，在项目目录中创建源代码文件。例如，创建一个简单的C语言程序，包含主函数和一些基本功能。创建完源代码文件后，这些文件还处于工作区（Working Directory），尚未被Git跟踪。

要将文件添加到Git的版本控制中，需要先将文件添加到暂存区（Staging Area）。使用`git add`命令可以将指定的文件添加到暂存区，例如`git add main.c`添加单个文件，或者使用`git add .`添加当前目录下的所有文件。添加到暂存区后，文件的状态变为已暂存（Staged），准备进行提交。

文件添加到暂存区后，需要使用`git commit`命令将更改提交到本地仓库。提交时需要添加提交信息，描述本次提交的内容，例如`git commit -m "Initial commit: add main.c"`。提交信息应该清晰明了，便于后续查看历史记录时理解每次提交的目的。【此处插入文件提交过程截图】

提交完成后，文件就被正式记录到Git仓库的历史中了。此时可以使用`git log`命令查看提交历史，确认提交是否成功。【此处插入git log输出截图】通过这种方式，项目的所有源程序文件都可以被纳入版本控制，Git会记录每次文件变更的完整历史。

## 四、版本管理实践

### 4.1 多次修改与提交

在实际开发过程中，源代码文件会经历多次修改。为了演示Git的版本管理功能，我们对之前创建的某个源代码文件进行多次修改。每次修改后，都需要将更改添加到暂存区并提交到仓库。例如，第一次修改可能是添加新的函数，第二次修改可能是优化算法，第三次修改可能是修复bug等。

每次提交都应该包含有意义的提交信息，说明本次修改的内容和目的。通过多次提交，Git会记录下文件的完整演变历史，形成一个版本链。这个过程体现了版本控制的核心价值：不仅保存了当前的文件状态，还保留了所有历史版本，使得我们可以随时回溯到任何一个历史状态。

### 4.2 查看文件历史记录

Git提供了强大的历史记录查看功能。`git log`命令可以显示所有的提交历史，包括提交的哈希值、作者、日期和提交信息。使用`git log --oneline`可以以简洁的单行格式显示提交历史，使用`git log --graph`可以以图形化的方式显示分支和合并历史。【此处插入git log详细输出截图】

对于特定文件的历史记录，可以使用`git log filename`命令查看该文件的所有提交历史。这个功能非常有用，可以帮助我们了解某个文件是如何逐步演变的，每次修改都做了什么改动。

### 4.3 查看不同版本之间的差别

Git的另一个强大功能是可以查看不同版本之间的差异。`git diff`命令可以显示工作区与暂存区的差异，`git diff --staged`可以显示暂存区与最后一次提交的差异，`git diff HEAD`可以显示工作区与最后一次提交的差异。

更重要的是，可以使用`git diff commit1 commit2`来比较两个特定提交之间的差异，或者使用`git diff commit1..commit2 filename`来比较某个文件在两个提交之间的变化。这些差异信息以统一的diff格式显示，清晰地标明了哪些行被添加、删除或修改。【此处插入版本对比差异截图】

通过查看版本差异，我们可以精确地了解每次提交具体改变了什么内容，这对于代码审查、问题追踪和版本回退都具有重要意义。

### 4.4 将文件恢复到前面的某个版本

Git的强大之处在于可以轻松地将文件恢复到之前的任何版本。恢复操作有多种方式，取决于具体需求。

如果只是想查看某个历史版本的内容，可以使用`git show commit:filename`命令。如果需要将文件恢复到某个历史版本，可以使用`git checkout commit -- filename`命令，这个命令会将指定文件恢复到指定提交时的状态，并将更改添加到暂存区。

另一种方式是使用`git reset`命令。`git reset --soft HEAD~n`可以将HEAD指针回退到前n个提交，但保留工作区和暂存区的更改；`git reset --mixed HEAD~n`会回退HEAD和暂存区，但保留工作区的更改；`git reset --hard HEAD~n`会完全回退到前n个提交的状态，丢弃所有后续的更改。

在执行恢复操作前，建议先使用`git log`查看提交历史，确定要恢复到的目标版本。【此处插入版本恢复过程截图】恢复完成后，可以使用`git status`和`git diff`命令确认恢复结果，然后提交恢复后的版本。

### 4.5 删除提交文件

在某些情况下，可能需要从Git仓库中删除某个文件。如果文件已经被提交到仓库，简单的文件系统删除是不够的，还需要告诉Git这个删除操作。

删除文件的方式有两种：一种是先手动删除文件，然后使用`git add`或`git rm`命令将删除操作添加到暂存区；另一种是直接使用`git rm filename`命令，这个命令会同时删除工作区的文件和暂存区的记录。

删除操作完成后，需要使用`git commit`提交这个删除操作。提交后，文件就从Git仓库中移除了，但历史记录中仍然保留着该文件存在时的提交记录。【此处插入删除文件操作截图】

删除文件后，可以使用`git status`查看项目状态，确认文件已被删除。如果需要恢复已删除的文件，可以使用`git checkout commit -- filename`从历史提交中恢复该文件。

## 五、分支管理

### 5.1 分支的概念与作用

分支（Branch）是Git中一个非常重要的概念。在Git中，分支本质上是指向提交对象的可变指针。默认情况下，Git会创建一个名为`master`或`main`的主分支。分支的作用在于允许开发者在不同的开发线上并行工作，而不会相互干扰。

分支的使用场景非常广泛。例如，在开发新功能时，可以创建一个功能分支，在这个分支上进行开发和测试，而主分支保持稳定。当功能开发完成并测试通过后，再将功能分支合并回主分支。这种方式既保证了主分支的稳定性，又允许并行开发多个功能，大大提高了开发效率。

### 5.2 创建分支

创建分支非常简单，使用`git branch branch-name`命令可以创建一个新分支。创建分支后，可以使用`git branch`命令查看所有分支，当前所在的分支会用星号标记。【此处插入分支创建截图】

创建分支后，需要切换到新分支才能在该分支上工作。使用`git checkout branch-name`命令可以切换到指定分支，或者使用`git checkout -b branch-name`命令可以同时创建并切换到新分支。

### 5.3 在分支中提交和对比文件

切换到新分支后，就可以在该分支上进行开发工作了。例如，可以修改某个源代码文件，添加新功能或进行重构。修改完成后，按照常规流程将更改添加到暂存区并提交。这些提交只存在于当前分支中，不会影响其他分支。

在分支开发过程中，可以使用`git diff main..branch-name`命令来对比主分支和当前分支之间的差异，了解在当前分支上做了哪些修改。【此处插入分支对比截图】这个功能对于代码审查和合并前的检查非常有用。

### 5.4 合并分支

当分支上的开发工作完成后，需要将分支的更改合并回主分支。合并操作首先需要切换回主分支，使用`git checkout main`命令。然后使用`git merge branch-name`命令将指定分支合并到当前分支。

如果合并过程中没有冲突，Git会自动创建一个合并提交，将两个分支的历史合并在一起。【此处插入分支合并过程截图】合并完成后，可以使用`git log --graph`命令查看合并后的分支历史，可以看到分支的分叉和合并点。

合并完成后，如果不再需要该分支，可以使用`git branch -d branch-name`命令删除已合并的分支。如果分支还未合并但确定要删除，可以使用`git branch -D branch-name`强制删除。

### 5.5 解决分支冲突

在合并分支时，如果两个分支对同一个文件的同一部分进行了不同的修改，Git无法自动决定应该保留哪个版本，就会产生冲突（Conflict）。当发生冲突时，Git会暂停合并过程，等待用户手动解决冲突。

冲突的文件中会包含冲突标记，格式为`<<<<<<<`、`=======`和`>>>>>>>`，标记出冲突的部分。需要手动编辑文件，选择保留哪些内容，或者将两个版本的修改进行整合。解决冲突后，需要使用`git add`命令将解决后的文件标记为已解决，然后使用`git commit`完成合并。【此处插入冲突解决过程截图】

冲突解决是多人协作开发中常见的场景，掌握冲突解决方法对于团队协作至关重要。通过合理的分支策略和及时的沟通，可以尽量减少冲突的发生。

## 六、远程协作

### 6.1 克隆GitHub开源项目

GitHub是全球最大的代码托管平台，上面有数以百万计的开源项目。学习Git的一个重要环节就是学会从GitHub克隆（Clone）开源项目到本地。克隆操作会将远程仓库的完整副本下载到本地，包括所有的文件、提交历史和分支信息。

克隆操作使用`git clone`命令，格式为`git clone repository-url`。例如，要克隆一个GitHub上的项目，可以使用`git clone https://github.com/username/repository.git`命令。克隆完成后，会在当前目录下创建一个与仓库同名的文件夹，其中包含了项目的所有文件。【此处插入GitHub克隆过程截图】

克隆操作不仅下载了代码，还自动设置了远程仓库的引用，可以使用`git remote -v`命令查看远程仓库信息。通过克隆开源项目，我们可以学习优秀的代码结构，了解项目的开发历史，这对于提升编程能力非常有帮助。

### 6.2 创建远程仓库并推送代码

除了克隆别人的项目，我们也可以将自己的项目推送到GitHub等远程托管平台。首先需要在GitHub上创建一个新的仓库，获取仓库的URL地址。

在本地仓库中，使用`git remote add origin repository-url`命令添加远程仓库的引用，其中`origin`是远程仓库的默认名称。添加远程仓库后，可以使用`git push -u origin main`命令将本地的主分支推送到远程仓库。`-u`参数会设置上游分支，之后可以直接使用`git push`进行推送。【此处插入代码推送过程截图】

推送成功后，远程仓库就包含了本地仓库的所有提交历史。团队成员可以通过克隆或拉取操作获取这些代码，实现代码的共享和协作。

### 6.3 多人协作开发

在实际的软件开发项目中，多人协作是常态。Git的分布式特性使得多人协作变得高效而灵活。每个开发者都拥有完整的项目副本，可以在本地独立工作，然后通过推送和拉取操作与团队其他成员同步代码。

协作的基本流程是：开发者从远程仓库克隆或拉取最新代码，在本地进行开发和提交，完成工作后将更改推送到远程仓库。其他开发者可以通过`git pull`命令拉取远程仓库的最新更改，更新本地代码。

在多人协作过程中，可能会出现这样的情况：当开发者A完成工作准备推送时，远程仓库已经被开发者B更新了。此时，开发者A需要先拉取远程更改，合并到本地，解决可能的冲突后，再推送自己的更改。这个过程确保了所有开发者的工作都能被正确整合。

### 6.4 体验冲突解决

为了深入理解多人协作中的冲突解决，我们与项目组同学进行了协作实验。具体过程是：多个同学各自克隆同一个远程仓库，然后同时修改同一个代码文件的不同部分或相同部分，分别提交并推送到远程仓库。

当第一个同学成功推送后，第二个同学在推送时会发现远程仓库已经有了新的提交。此时需要使用`git pull`拉取远程更改。如果两个同学修改了文件的不同部分，Git通常能够自动合并；但如果修改了相同或相邻的代码行，就会产生冲突。【此处插入多人协作冲突截图】

冲突发生时，需要手动编辑冲突文件，仔细分析两个版本的修改意图，选择保留合适的代码，或者将两个版本的优点结合起来。解决冲突后，将文件标记为已解决并提交，然后推送到远程仓库。这个过程虽然可能有些复杂，但它是多人协作中必须掌握的技能。

通过这次协作实验，我们深刻体会到了版本控制在团队开发中的重要性。合理的分支策略、清晰的提交信息、及时的沟通协调，都是确保团队协作顺利进行的关键因素。

## 七、标签管理

### 7.1 标签的概念与作用

标签（Tag）是Git中用于标记特定提交的引用，通常用于标记重要的版本节点，如软件发布的版本号（如v1.0.0、v2.1.3等）。与分支不同，标签是静态的，创建后通常不会移动，它指向一个固定的提交，用于永久性地标记项目的某个重要状态。

标签在软件发布管理中非常重要。当软件达到一个稳定版本时，可以创建一个标签来标记这个版本，方便后续查找和回溯。标签还可以用于文档版本、里程碑标记等场景。

### 7.2 创建本地标签

Git支持两种类型的标签：轻量级标签（Lightweight Tag）和附注标签（Annotated Tag）。轻量级标签只是一个指向特定提交的指针，而附注标签则包含创建者的信息、日期和可选的说明信息，更适合用于发布标记。

创建轻量级标签使用`git tag tag-name`命令，例如`git tag v1.0.0`。创建附注标签使用`git tag -a tag-name -m "tag message"`命令，例如`git tag -a v1.0.0 -m "Release version 1.0.0"`。如果不指定提交，标签会默认指向当前的HEAD提交；也可以指定特定的提交，例如`git tag v1.0.0 commit-hash`。

创建标签后，可以使用`git tag`命令查看所有标签，使用`git show tag-name`查看标签的详细信息。【此处插入标签创建和查看截图】

### 7.3 推送标签到远程仓库

默认情况下，`git push`命令不会推送标签。如果需要将标签推送到远程仓库，可以使用`git push origin tag-name`推送单个标签，或者使用`git push origin --tags`推送所有标签。

推送标签后，团队成员就可以看到这些标签，并且可以通过标签来检出特定的版本。这对于团队协作和版本发布管理非常重要。【此处插入标签推送截图】

### 7.4 查看和删除标签

查看标签可以使用`git tag`命令列出所有标签，使用`git show tag-name`查看标签的详细信息。如果需要查看特定模式的标签，可以使用`git tag -l "pattern"`命令，例如`git tag -l "v1.*"`可以列出所有以v1开头的标签。

删除标签分为删除本地标签和删除远程标签。删除本地标签使用`git tag -d tag-name`命令。删除远程标签需要两步：先删除本地标签，然后使用`git push origin :refs/tags/tag-name`或`git push origin --delete tag-name`删除远程标签。【此处插入标签删除截图】

标签管理是版本控制的重要组成部分，通过合理使用标签，可以更好地管理项目的版本发布历史，方便团队成员和用户查找和使用特定版本。

## 八、实验总结

通过本次实验，我对配置管理和Git版本控制系统有了深入的理解和实践经验。从Git的安装配置开始，到本地仓库的创建和管理，再到版本控制、分支操作、远程协作和标签管理，整个实验过程系统地覆盖了Git的核心功能。

在实验过程中，我深刻体会到了版本控制在软件开发中的重要性。Git不仅能够帮助我们追踪代码的变更历史，还能够支持多人协作开发，通过分支和合并机制实现并行开发，大大提高了开发效率。特别是在多人协作实验中，通过实际体验冲突的产生和解决过程，我更加理解了团队协作中沟通和协调的重要性。

通过本次实验，我掌握了Git的基本操作命令，理解了工作区、暂存区和仓库的概念，学会了如何创建和管理分支，如何进行版本回退和恢复，如何与远程仓库协作，以及如何使用标签管理版本。这些知识和技能对于今后的软件开发工作具有重要的实用价值。

同时，我也认识到Git的学习是一个持续的过程。虽然本次实验涵盖了Git的基本功能，但Git还有很多高级特性和最佳实践值得进一步学习和探索。在今后的学习和工作中，我将继续深入学习Git的高级功能，如rebase、cherry-pick、stash等，不断提升版本控制的能力。

总的来说，本次实验不仅让我掌握了Git这一重要的开发工具，更重要的是培养了我对软件工程规范的认识，理解了配置管理在软件开发生命周期中的重要地位。这些知识和经验将为我今后的软件开发和团队协作打下坚实的基础。

